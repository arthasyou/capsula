# 数据胶囊的3种状态

状态A：刚生成的原始数据集合，如检查报告单，尚未发出，属于0阶数据胶囊
状态B：一阶数据胶囊，一般存储在数据银行或所有者终端
B0: 尚在完善元数据的一阶数据胶囊，处于变化状态
B1: 未授权使用的数据胶囊
B2: 已授权使用的数据胶囊
B3: 经过二次加工的一阶数据胶囊，加工技术包括摘要、统计、分析等
状态C：二阶数据胶囊，打包好的一阶数据胶囊，一般存在数据银行
C0：数据全集
C1: 二阶数据胶囊子集，这是选取后准备发给医疗服务方的数据集

这些状态直接影响数据安全机制的设计，以及数据的封装、处理、解封

这里只讨论状态B，因为我们现在只关注1阶数据胶囊

## 数据银行需要存储什么样的数据胶囊

我的理解是数据银行应该数据一个 B1 + B3 结合的数据胶囊。  
为什么要这么做

1. **来源证明**：B1 保存原始报告的加密版本及生产者签名，保证可追溯性与法律合规。  
2. **隐私保护**：B3 是经过脱敏/加工的版本，便于日常授权访问，避免频繁触碰原文。  
3. **灵活授权**：授权时通常针对 B3，但若需要可通过 ZKP 或审计机制证明其与 B1 的一致性。  
4. **再加工能力**：保存 B1 可以在未来规则更新时重新生成 B3，避免丢失原始上下文。  
5. **安全架构**：B1 永远加密存储，不直接解封，只作为证明链的根；B3 则是服务交付的主力。  

因此 B1 与 B3 并存的设计既满足了合规与可验证需求，也兼顾了隐私与效率。

至于B2的状态我的理解只需要额外再提供一个授权部分，无需再对数据胶囊做一次封装。

B2 的本质是 B1/B3 的访问控制层，不改变数据本体，只增加授权、策略、密钥分发等信息。授权的实现方式通常通过 GrantEnvelope 绑定 CapsuleID、VersionID 与访问者公钥，附加策略（如时间、范围、次数）来进行管理。授权可以被单独撤销或替换，而无需改动 B1 或 B3，本体保持不可变。B2 同时记录所有的授权行为与访问历史，作为审计链条的重要部分。整体来看，B1 是根数据，B3 是日常交付的数据，B2 则负责访问权限与证明，三者共同组成完整的一阶数据胶囊体系。这种分层模型让数据胶囊既能保持一次封装不变，又能灵活满足多样化的使用和合规需求。

